## Chapter03
- 객체지향에서 가장 중요한 것은 역할, 책임, 협력이다. 
- 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 '협력'이라고 한다.
- 객체가 협력에 참여하기 위해 수행하는 로직은 '책임'이라고 부른다.
- 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 '역할'을 구성한다.
### 01 협력
- 객체지향 시스템은 자율적인 객체들의 공동체이다.
- 협력은 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법.
- 메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.
- 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없기 때문에 오직 메시지 전송을 통해서만 자신의 요청을 전달할 수 있다.
- 협력이란, 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것이다. 한객체는 어떤 것이 필요할 때 다른 객체에게 전적으로 위임하거나 서로 협력한다.
- 즉, 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것
- 메시지를 수신한 객체는 메서드를 실행해 요청에 응답.
- 결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는 것이다.
- 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 전송해서 협력을 요청.

### 02 책임
#### 책임이란 무엇인가
- 협력에 참여하기 위해 객체가 수행하는 행동을 책임이라고 부른다.
- 책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야 하는 정보와 수행 할 수 있는 행동에 대해 개략적으로 서술한 문장.
객체의 책임은 객체가 '무엇을 알고 있는가'와 '무엇을 할 수 있는가'로 구성.
- 크레이그 라만은 이러한 분류 체계에 따라 객체의 책임을 크게 '하는 것'과 '아는 것'의 두 가지 범주로 나누어 세분화.
- 객체지향 설계에서 가장 중요한 것은 책임이다. 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 품질을 결정한다.
- 객체의 구현 방법은 상대적으로 책임보다는 덜 중요하며 책임을 결정한 다음에 고민해도 늦지 않다.
##### 하는 것
- 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
- 다른 객체의 행동을 시작시키는 것
- 다른 객체의 활동을 제어하고 조절하는 것
##### 아는 것
- 사적인 정보에 관해 아는 것
- 관련된 객체에 관해 아는 것
- 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것.
##### 영화 예매 시스템
- 영화 예매 시스템에서 Screening의 책임은? => 영화를 예매하는 것이다.
- Movie의 책임은? => 요금을 계산 하는 것.
- Screening은 영화를 예매할 수 있어야 한다. 이것은 하는 것과 관련된 책임.
- Screening은 자신이 상영할 영화를 알고 있어야 한다. 이것은 아는 것과 관련된 책임
- Movie는 예매 가격을 계싼할 책임을 진다. 이것은 하는 것과 관련된 책임. 또한 가격과 어떤 할인 정책이 적용됐는지도 알고 있어야 한다. 이것은 아는 것과 관련된 책임.

#### 책임 주도 설계 방법
- 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악.
- 시스템 책임을 더 작은 책임으로 분할.
- 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당.
- 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

#### 메시지가 객체를 결정한다.
- 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택.
- 메시지가 객체를 선택하게 해야 하는 두 가지 이유
    - 첫째, 객체가 최소한의 인터페이스를 가질 수 있게 된다.
    - 필요한 메시지가 식별될 때까지 객체의 퍼블릭 인터페이스에 어떤 것도 추가하지 않기 때문에 객체는 애플리케이션에 크지도, 작지도 않은 꼭 필요한 크기의 퍼블릭 인터페이스를 가질 수 있다.
    - 둘째, 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다.
    - 객체의 인터페이스는 무엇을 하는지는 표현해야 하지만 어떻게 수행하는지를 노출해서는 안 된다.
    - 메시지는 외부의 객체가 요청하는 무언가를 의미하기 때문에 메시지를 먼저 식별하면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있다.
    
#### 행동이 상태를 결정한다.
- 객체가 존재하는 이유는 협력에 참여하기 위해서다. 따라서 객체는 협력에 필요한 행동을 제공해야 한다.
- 객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동.
- 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법.
- 객체가 협력에 적합한지를 결정하는 것은 그 객체의 상태가 아니라 행동이다.

### 03 역할
#### 역할과 협력
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 한다.
- 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는게 좋다.
- 예를 들어, 영화 예매 협력에서 '예매하라'라는 메시지를 처리하기에 적합한 객체로 Screening을 선택했다.
- 영화를 예매할 수 있는 적절한 역할이 무엇인가를 찾고, 역할을 수행할 객체로 Screening 인스턴스를 선택하는 두 개의 독립적인 단계로 책임 할당 과정이 일어난다.

#### 역할의 구현
- 추상화라는 말에서 예상했겠지만 역할을 구현하는 가장 일반적인 방법은 추상 클래스와 인터페이스를 사용하는 것이다.
- 추상 클래스는 책임의 일부를 구현해 놓은 것이고 인터페이스는 일체의 구현 없이 책임의 집합만을 나열해 놓았다는 차이가 있지만 협력의 관점에서는 둘 모두 역할을 정의할 수 있는 구현 방법이라는 공통점을 공유.
- 추상 클래스와 인터페이스는 동일한 책임을 수행하는 다양한 종류의 클래스들을 협력에 참여시킬 수 있는 확장 포인트를 제공. 이들은 동일한 책임을 수행할 수 있는 객체들을 협력 안에 수용할 수 있는 역할.
- 역할이 다양한 종류의 객체를 수용할 수 있는 일종의 슬롯이자 구체적인 객체들의 타입을 캡슐화하는 추상화라는 것.
- 협력 안에서 역할이 어떤 책임을 수행해야 하는지를 결정하는 것이 중요. 역할을 구현하는 방법은 그 다음 문제.
- 객체에게 중요한 것은 행동이며, 역할은 객체를 추상화해서 객체 자체가 아닌 협력에 초점을 맞출 수 있게 한다.

#### 객체 대 역할
- 객체에 관해 생각할 때 '이 객체가 무슨 열학을 수행해야 하는가?' 라고 자문하는 것이 도움이 된다.
- 이 질문은 객체가 어떤 형태를 띠어야 하는지, 그리고 어떤 동작을 해야 하는지에 집중할 수 있게 도와준다.
- 만약 동일한 종류의 객체가 하나의 역할을 항상 수행한다면 둘은 동일한 것이다. 하지만 어떤 협력에서 하나 이상의 객체가 동일한 책임을 수행할 수 있다면 역할은 서로 다른 방법으로 실행할 수 있는 책임의 집합이 된다.
- 역할이란 퍼로그램이 실행될 때 소프트웨어 기계 장치에서 적절한 객체로 메워 넣을 수 있는 하나의 슬롯으로 생각할 수 있다.
- 모든 것이 안개 속에 둘러싸여 있고 정확한 결정을 내리기 어려운 상황이라면 구체적인 객체로 시작해서 다양한 시나리오를 탐색하고 유사한 협력들을 단순화하고 합치다 보면 자연스럽게 역할이 그 모습을 드러낸다.

#### 역할과 추상화
- 추상화 장점
    - 추상화 계층만을 이용하면 중요한 정책을 상위 수준에서 단순화할 수 있다. 
    - 설계가 좀 더 유연해진다.
- 역할은 공통의 책임을 바탕으로 객체의 종류를 숨기기 때문에 이런 관점에서 역할을 객체의 추상화로 볼 수 있다.
